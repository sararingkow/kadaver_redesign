---
const fetchCards = async () => {
  const response = await fetch("https://iwqejxdoyvguvkbjlqrq.supabase.co/rest/v1/listview_cards", {
    method: "GET",
    headers: {
      apikey:
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml3cWVqeGRveXZndXZrYmpscXJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk5MDgyMTksImV4cCI6MjA1NTQ4NDIxOX0.uGOrCj2BHaecpyauDJEjv-iZfytL2pUg0wVzj8YLsN0",
    },
  });
  return response.ok ? await response.json() : [];
};

const cards = await fetchCards();

import MainLayout from "../layouts/MainLayout.astro";
import Button from "../components/Button.astro";
---

<MainLayout title="Kadaver | Hjem" description="Kadaver's forside" ogtitle="Kadaver - forside" ogdescription="Kadaver's forside/startside">
  <section id="top-section" class="relative md:mb-desktop-bottom mb-mobil-bottom w-full h-screen">
    <div class="absolute inset-0 w-full h-full z-0">
      <img src="/images/hero_gif.webp" alt="background gif" class="w-full h-screen object-cover" />
      <div class="absolute inset-0 bg-gray-950 opacity-80 z-[10]"></div>
      <div class="absolute inset-0 md:mt-12 mt-0 max-w-7xl mx-auto md:px-0 px-8 z-20 grid grid-cols-12 gap-6 content-center h-full">
        <div class="typewriter col-span-12 md:col-span-12 z-30">
          <h1 class="display text-gray-50">Kadaver</h1>
        </div>
        <h2 class="text-h3-mobile md:text-h3-desktop text-gray-50 col-span-12 lg:col-span-8 xl:col-span-6">
          Kreativ kommunikation, der skaber stærke relationer
        </h2>
        <p class="text-gray-50 col-span-12 lg:col-span-10 xl:col-span-8 md:pb-12 pb-8">
          Hos Kadaver skaber vi indhold, der fanger og motiverer. Vi tror på, at kreativ kommunikation er nøglen til at hjælpe brands med at finde
          deres egen stemme. Med strategisk storytelling og innovative løsninger bygger vi stærke forbindelser, der går ud over det almindelige og
          skaber langvarige relationer med dit publikum.
        </p>
        <div class="btn_container flex flex-row gap-6 md:gap-12 col-span-12">
          <a href="/kontakt">
            <Button variant="secondary" size="small">Kontakt os</Button>
          </a>
          <a href="/listview">
            <Button variant="secondary" href="/listview" size="small">Vores cases</Button>
          </a>
        </div>
      </div>
      <div class="absolute bottom-[3%] md:bottom-[2.5%] w-full flex justify-center z-[30]">
        <a href="#about">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="float w-8 h-8 sm:w-10 sm:h-10 text-gray-50 hover:text-violet-600 transition duration-300 ease-in-out"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <section id="about" class="about-section px-6 md:px-12 grid gap-12 md:md:mt-desktop-top mt-mobil-top md:mb-desktop-bottom mb-mobil-bottom">
    <div class="about_grid grid md:grid-cols-2 gap-12">
      <div class="bg-gray-100 rounded-sm p-8">
        <h3 class="mb-4">Hvem er vi?</h3>
        <p>
          Kadaver er et kreativt brand- og contentbureau, der bryder med normen og skaber oplevelser, der både engagerer og inspirerer. Vi forener
          strategi, design og storytelling for at bringe idéer til live.
        </p>
      </div>
      <div class="bg-gray-100 rounded-sm p-8">
        <h3 class="mb-4">Hvad laver vi?</h3>
        <p>
          Vi skaber kampagner, brandoplevelser og innovative løsninger, der bryder grænser. Uanset om det drejer sig om events, branding eller
          digitale koncepter, udvikler vi unikke løsninger, der engagerer.
        </p>
      </div>
    </div>
    <div class="about_grid grid md:grid-cols-2 gap-12">
      <div class="bg-gray-100 rounded-sm p-8">
        <h3 class="mb-4">Vores tilgang</h3>
        <p>
          Vi tror på, at de bedste resultater opstår gennem tæt samarbejde. Vi tænker kreativt og finder løsninger, der både overrasker og skaber
          værdi.
        </p>
      </div>
      <div class="bg-gray-100 rounded-sm p-8">
        <h3 class="mb-4">Vores proces</h3>
        <p>
          Vores proces bygger på samarbejde, så vi altid er i tæt dialog med dig, fra idé til færdigt resultat. Sammen sikrer vi, at din vision bliver
          til virkelighed.
        </p>
      </div>
    </div>
  </section>

  <section class="our_cases">
    <div class="md:mb-desktop-bottom mb-mobil-bottom max-w-7xl mx-auto md:px-0 px-8 grid grid-cols-12 gap-6 md:gap-12 items-center justify-center">
      <div class="col-span-12">
        <h3 class="highlighted_cases_title pb-2 md:pb-4">Vores cases</h3>
        <div class="highlighted_cases_text flex flex-col md:flex-row md:items-center gap-6 md:gap-12">
          <p>
            Er du nysgerrig på, hvordan vores værdier bliver til handling? Tag et kig på vores cases, <br class="hidden md:block" /> og se, hvordan vi
            skaber kampagner, der engagerer og skaber langvarige indtryk.
          </p>
        </div>
        <div class="btn_container pt-8">
          <a href="/listview">
            <Button variant="primary" size="small">Gå til cases</Button>
          </a>
        </div>
        <!-- Carrousel -->
        <div id="carousel-container" class="col-span-10 relative w-full overflow-hidden">
          <div class="min-h-[400px] relative">
            <div class="container mx-auto w-full overflow-hidden relative">
              <div class="w-full h-full absolute">
                <div class="w-1/4 h-full absolute z-30 left-0" style="background: linear-gradient(to right, #f6f6f6, #f6f6f600);"></div>
                <div class="w-1/4 h-full absolute z-30 right-0" style="background: linear-gradient(to left, #f6f6f6, #f6f6f600);"></div>
              </div>

              <div id="logo-slider" class="logo-slider overflow-hidden">
                <div class="marquee">
                  <div class="carousel-items flex items-center justify-center">
                    {
                      cards.map((card) => (
                        <div
                          class="carousel-focus flex flex-col relative bg-gray-100 mx-5 my-10 rounded-sm shadow-drop25"
                          style="width: 400px;"
                          aria-label={`View project: ${card.title}`}
                        >
                          <img
                            class="w-full h-[350px] object-cover rounded-tl-sm rounded-tr-sm border-gray-200 flex-shrink-0"
                            src={card.image}
                            alt={`Screenshot of the frontpage for ${card.title}`}
                          />
                          <div class="p-6">
                            <h4 class="mb-2 ">{card.title}</h4>
                            <p class="pb-8 bold text-gray-700">{card.subtitle}</p>
                          </div>
                        </div>
                      ))
                    }
                    <!-- Duplicate for smooth looping -->
                    {
                      cards.map((card) => (
                        <div
                          class="carousel-focus flex flex-col relative bg-gray-100 mx-5 my-10 rounded-sm shadow-drop25"
                          style="width: 400px;"
                          aria-label={`View project: ${card.title}`}
                        >
                          <img
                            class="w-full h-[350px] object-cover rounded-tl-sm rounded-tr-sm border-gray-200 flex-shrink-0"
                            src={card.image}
                            alt={`Screenshot of the frontpage for ${card.title}`}
                          />
                          <div class="p-6">
                            <h4 class="mb-2 ">{card.title}</h4>
                            <p class="pb-8 bold text-gray-700">{card.subtitle}</p>
                          </div>
                        </div>
                      ))
                    }
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <section class="contact md:mb-desktop-bottom mb-mobil-bottom max-w-7xl mx-auto md:px-0 px-8 grid grid-cols-12 gap-6 md:gap-12 justify-center">
      <div class="contact_text col-span-12 md:col-span-8 md:col-start-2">
        <h3 class="pb-2 md:pb-4">Har du en idé? Lad os gøre <br class="hidden md:block" /> den til virkelighed</h3>
        <p class="pb-4">
          Har du en idé, et projekt eller en udfordring, vi kan hjælpe med? Lad os tage en snak om, <br class="hidden md:block" /> hvordan vi sammen kan
          skabe kreative løsninger, der inspirerer og fanger opmærksomhed. <br class="hidden md:block" />Kontakt os i dag&mdash; vi glæder os til at
          høre fra dig!
        </p>
        <div class="btn_container pt-6">
          <a href="/kontakt">
            <Button variant="primary" size="small">Gå til kontakt-siden</Button>
          </a>
        </div>
      </div>
      <div class="logo hidden md:block col-span-2 content-center">
        <img src="/images/logo_gradient.webp" alt="Logo for Kadaver" class="w-40 h-40" />
      </div>
    </section>

    <style>
      @keyframes float {
        0% {
          transform: translatey(0);
        }
        50% {
          transform: translatey(-10px);
        }
        100% {
          transform: translatey(0);
        }
      }
      .float {
        animation: float 3s ease-in-out infinite;
      }

      /* Define keyframes globally (not inside media queries) */
      @keyframes typewriter {
        0% {
          width: 0;
        }
        100% {
          width: 37.5%;
        }
      }

      @keyframes typewriter-mobile {
        0% {
          width: 0;
        }
        100% {
          width: 69%;
        }
      }

      @keyframes blink-caret {
        from,
        to {
          border-color: transparent;
        }
        50% {
          border-color: #0143fd;
        }
      }

      /* Default typewriter effect (for desktop) */
      .typewriter {
        overflow: hidden;
        white-space: nowrap; /* Ensures text stays in one line */
        border-right: 8px solid;
        display: inline-block;
        animation:
          typewriter 0.9s steps(30) 0.8s 1 normal both,
          blink-caret 0.9s step-end infinite;
      }

      /* Modify animation for smaller screens */
      @media screen and (max-width: 1020px) {
        .typewriter {
          animation:
            typewriter-mobile 0.9s steps(30) 0.8s 1 normal both,
            blink-caret 0.9s step-end infinite;
        }
      }

      .logo-slider {
        max-width: fit-content;
        min-width: 400px;
        width: 100%;
        display: flex;
        padding-block: 5px;
        overflow: hidden;
      }

      .marquee {
        display: flex;
        width: fit-content;
        animation: marquee 400s linear infinite;
      }

      .carousel-items {
        display: flex;
        opacity: 0.5;
        filter: grayscale(100%);
      }

      @keyframes marquee {
        0% {
          transform: translateX(0%);
        }
        100% {
          transform: translateX(-50%);
        }
      }

      #top-section p,
      #top-section h1,
      #top-section h2 {
        text-shadow: 4px 4px 4px rgba(0, 0, 0, 0.25);
      }
    </style>

    <script>
      import { inView } from "motion";

      const elementmedanimation2 = document.querySelector("h2");
      inView(elementmedanimation2, () => {
        elementmedanimation2.classList.add("animate__animated", "animate__slideInRight");
      });

      const elementmedanimation3 = document.querySelector("#top-section p");
      inView(elementmedanimation3, () => {
        elementmedanimation3.classList.add("animate__animated", "animate__slideInLeft");
      });

      const elementmedanimation4 = document.querySelector(".btn_container");
      inView(elementmedanimation4, () => {
        elementmedanimation4.classList.add("animate__animated", "animate__zoomIn");
      });

      /* InView Animations for Each Image with Delay */
      const sections = document.querySelectorAll(".about_grid > div");

      sections.forEach((sections, index) => {
        inView(sections, () => {
          sections.classList.add("animate__animated", "animate__fadeInUp");
          sections.style.animationDelay = `${index * 0.2}s`; // Delay each image by 0.2s
        });
      });

      const elementmedanimation5 = document.querySelector(".contact_text");
      inView(elementmedanimation5, () => {
        elementmedanimation5.classList.add("animate__animated", "animate__slideInLeft");
      });

      const elementmedanimation6 = document.querySelector(".logo");
      inView(elementmedanimation6, () => {
        elementmedanimation6.classList.add("animate__animated", "animate__slideInRight");
      });

      const elementmedanimation7 = document.querySelector(".our_cases");
      inView(elementmedanimation7, () => {
        elementmedanimation7.classList.add("animate__animated", "animate__fadeInRight");
      });
    </script>
  </section>
</MainLayout>
